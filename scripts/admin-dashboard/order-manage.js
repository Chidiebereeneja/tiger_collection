"use strict";

const PendingObj = [
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Pending",
	},
];

const cancelledObj = [
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Cancelled",
	},
];

const confirmedObj = [
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		customer_name: "Collins Doe",
		profit: "₦654",
		profit_percentage: "16%",
		status: "Confirmed",
	},
];

const subModalObj = [
	{
		order_id: "#123456789",
		created: "2 min ago",
		product_name: "Urban Shirt",
		quantity: "x1",
		price: "₦999.29",
		total_price: "₦3,000.29",
		dicount: "5%",
	},
	{
		order_id: "#123456789",
		created: "40 min ago",
		product_name: "Urban Shirt",
		quantity: "x8",
		price: "₦999.29",
		total_price: "₦3,000.29",
		dicount: "30%",
	},
	{
		order_id: "#123456789",
		created: "2 hours ago",
		product_name: "Urban Shirt",
		quantity: "x2",
		price: "₦999.29",
		total_price: "₦3,000.29",
		dicount: "15%",
	},
	{
		order_id: "#123456789",
		created: "2 min ago",
		product_name: "Urban Shirt",
		quantity: "x1",
		price: "₦999.29",
		total_price: "₦3,000.29",
		dicount: "5%",
	},
];

const notificationBell = document.getElementById("notify_bell");
const menuList = document.querySelector(".menu-list").children;
const prodProgressContainer = document.getElementById(
	"product_progress_container"
);

const modalBtns = document.querySelectorAll("div#modal_header_btns li button");

const allOrderArr = [];

PendingObj.forEach((obj, i) => {
	allOrderArr.push(obj);
	allOrderArr.push(confirmedObj[i]);
	allOrderArr.push(cancelledObj[i]);
});

const checkStatusTask = function (str) {
	if (str === "Pending") {
		return "pending_sty";
	} else if (str === "Confirmed") {
		return "confirm_sty";
	} else if (str === "Cancelled") {
		return "cancel_sty";
	}
};

const modalRenderTask = function (arrObj, idStr) {
	const sectionCont = document.getElementById(idStr);

	arrObj.map((obj) => {
		sectionCont.querySelector("table").innerHTML += `
			<tbody>
				<tr class="row">
					<td>${obj.order_id}</td>
					<td>${obj.created}</td>
					<td>${obj.customer_name}</td>
					<td>₦654</td>
					<td>₦154 <mark>${obj.profit_percentage}</mark></td>
					<td><span class=${checkStatusTask(obj.status)}>${obj.status}</span></td>
					<td>
					<button><i class="fa-solid fa-angle-down"></i></button>
					</td>
				</tr>
			</tbody>
		`;
	});

	const pignationCont = sectionCont.querySelector("div.pagination_container");
};
modalRenderTask(PendingObj, "pending_");
modalRenderTask(confirmedObj, "confirmed_");
modalRenderTask(cancelledObj, "cancelled_");
modalRenderTask(allOrderArr, "all_");

const defaultTask = function (container) {
	Array.from(container).map((ul) => {
		const lists = ul.querySelectorAll("li");

		lists.forEach((li) => {
			const span = li.querySelector("span");
			if (span.textContent.trim() === "Order Management") {
				span.parentNode.classList.add("active");
			}
		});
	});
};
defaultTask(menuList);

const clickModalTask = function (ev) {
	console.log(ev.target);

	const arrContainer = Array.from(menuList);

	arrContainer.map((ul) => {
		const lists = ul.querySelectorAll("li");

		lists.forEach((li) => {
			li.classList.remove("active");
		});
	});

	if (ev.target.tagName === "LI") {
		ev.target.classList.add("active");
		const spanStr = ev.target.querySelector("span").textContent;

		window.location.href = `${spanStr.toLowerCase()}.html`;
	} else if (ev.target.tagName === "SPAN") {
		ev.target.parentNode.classList.add("active");
		window.location.href = `${ev.target.textContent.toLowerCase()}.html`;
	} else if (ev.target.tagName === "I") {
		ev.target.parentNode.classList.add("active");
		const spanStr = ev.target.parentNode.querySelector("span").textContent;

		const checkEl =
			spanStr.split(" ").length === 1
				? `pages/admin-dashboard/${spanStr.toLowerCase()}.html`
				: `pages/admin-dashboard/$order-manage.html`;
		console.log(checkEl);

		window.location.href = checkEl;
	}

	// arrContainer.map((ul) => {
	// 	arrContainer.map((ul) => {
	// 		const lists = ul.querySelectorAll("li");

	// 		lists.forEach((li) => {
	// 			li.classList.remove("active");
	// 		});
	// 	});

	// 	ul.addEventListener("click", (e) => {
	// 		if (e.target.tagName === "LI") {
	// 			e.target.classList.add("active");
	// 		} else if (e.target.tagName === "SPAN") {
	// 			console.log(e.target);
	// 		} else if (e.target.tagName === "I") {
	// 			console.log(e.target);
	// 		}
	// 	});
	// });
};

const clickEventTask = function () {
	Array.from(menuList).map((ul) => {
		ul.addEventListener("click", clickModalTask.bind(this));
	});
};
clickEventTask();

const subModalTask = function (container) {
	const firstElementBtn = container.querySelector("button");
	if (!firstElementBtn) return;
	const containerId = firstElementBtn.getAttribute("data-container-id");

	const allCon = container.parentNode.querySelectorAll(".progress_");
};

const allSection = document.querySelectorAll(".progress_");

const createSubElModalTask = function (container) {
	const thead = `<thead class="modal_order_header">
			<tr class="style">
			<th><span>#</span> <span> SKU</span></th>
			<th>Name</th>
			<th>Price</th>
			<th>qty</th>
			<th>disc.</th>
			<th>total</th>
			<th><i class="fa-solid fa-print"></i>Print</th>
			</tr>
		</thead>

		<tbody class="modal_order_body">
			<tr class="modal_row_order">
				<td>#123456789</td>
				<td>Urban Shirt</td>
				<td>₦999.29</td>
				<td>x1</td>
				<td>5%</td>
				<td>₦3,000.29</td>
				<td></td>
			</tr>

			<tr class="modal_row_order">
				<td>#123456789</td>
				<td>Urban Shirt</td>
				<td>₦999.29</td>
				<td>x1</td>
				<td>5%</td>
				<td>₦3,000.29</td>
				<td></td>
			</tr>

			<tr class="modal_row_order">
				<td>#123456789</td>
				<td>Urban Shirt</td>
				<td>₦999.29</td>
				<td>x1</td>
				<td>5%</td>
				<td>₦3,000.29</td>
				<td></td>
			</tr>

			<tr class="modal_order_row_total">
				<td></td>
				<td></td>
				<td></td>
				<td class="indicate_style">Subtotal</td>
				<td></td>
				<td>₦9,000.29</td>
				<td></td>
			</tr>

			<tr class="modal_ship_row_total">
				<td></td>
				<td></td>
				<td></td>
				<td class="indicate_style">Shipping</td>
				<td></td>
				<td>₦5.50</td>
				<td></td>
			</tr>

			<tr class="modal_discount_row_total">
				<td></td>
				<td></td>
				<td></td>
				<td class="indicate_style">Discount</td>
				<td></td>
				<td id="color_style">₦150.50</td>
				<td></td>
			</tr>

			<tr class="modal_total_row">
				<td></td>
				<td></td>
				<td></td>
				<td class="indicate_style">Total</td>
				<td></td>
				<td>₦9,647.32</td>
				<td>Pending</td>
			</tr>
		</tbody>
	`;
	if (container.classList.contains("active_click")) return;
	console.log(container);

	container.insertAdjacentHTML("afterend", thead);
	container.classList.add("active_click");
};

const subModalClassTask = function (container, str = "") {
	const subHeaderCon = container.querySelector(".modal_order_header");
	const subBodyCon = container.querySelector(".modal_order_body");

	if (str === "") {
		subBodyCon.classList.remove("hidden");
		subHeaderCon.classList.remove("hidden");
	} else if (str === "remove") {
		subBodyCon.classList.add("hidden");
		subHeaderCon.classList.add("hidden");
	}
};

const clickModalOrderTask = function (ev) {
	ev.stopPropagation();
	const targetEl = ev.target;
	const targetTxt = targetEl.textContent.toLowerCase();
	const targetDisplayContainer = document.getElementById(`${targetTxt}_`);
	const allProgressCont = document.querySelectorAll("section.progress_");

	if (!targetDisplayContainer) return;

	// Hide all sections
	allProgressCont.forEach((cont) => cont.classList.add("hidden"));
	targetDisplayContainer.classList.remove("hidden");

	// Update active button
	const firstElementBtn = targetDisplayContainer.querySelector("button");
	if (firstElementBtn) {
		firstElementBtn.setAttribute("data-container-id", `${targetTxt}_`);
	}

	modalBtns.forEach((btn) => btn.classList.remove("active_modal_header"));
	targetEl.classList.add("active_modal_header");

	// targetEl.removeEventListener("click", clickModalOrderTask);
	subModalTask(targetDisplayContainer);
};
modalBtns.forEach((el) => {
	el.addEventListener("click", clickModalOrderTask.bind(this));
});

/*
const subModalTask = function (container) {
	const firstElementBtn = container.querySelector("button");
	const containerId = firstElementBtn.getAttribute("data-container-id");
	container.addEventListener("click", (ev) => {
		ev.stopPropagation();
		clickSubModalOrderTask(ev, containerId, container);
	});
};

function clickSubModalOrderTask(ev, idTxt, container) {
	const sectionCont = document.getElementById(idTxt);
	if (ev.target.tagName.toLowerCase() === "button") {
		console.log(sectionCont);
		// console.log(ev.target);
	} else if (ev.target.tagName.toLowerCase() === "i") {
		if (ev.target.classList.contains("fa-angle-down")) {
			console.log(sectionCont);
		} else if (ev.target.classList.contains("fa-angle-up")) {
			console.log(sectionCont);
		}
	}

	removeEventListener("click", container);
}

const clickModalOrderTask = function (ev) {
	ev.stopPropagation();
	const targetEl = ev.target;
	const targetTxt = targetEl.textContent.toLowerCase();
	const targetDisplayContainer = document.getElementById(`${targetTxt}_`);
	const allProgressCont = document.querySelectorAll("section.progress_");

	allProgressCont.forEach((cont) => cont.classList.add("hidden"));
	targetDisplayContainer.classList.remove("hidden");

	const firstElementBtn = targetDisplayContainer.querySelector("button");
	firstElementBtn.setAttribute("data-container-id", `${targetTxt}_`);

	modalBtns.forEach((btn) => {
		btn.classList.remove("active_modal_header");
	});
	targetEl.classList.add("active_modal_header");

	subModalTask(targetDisplayContainer);
};

modalBtns.forEach((el) => {
	el.addEventListener("click", clickModalOrderTask.bind(this));
});
*/
